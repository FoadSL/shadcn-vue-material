# Contributing to shadcn-vue-material

Thank you for your interest in contributing! This guide will help you get started.

## How This Repo Works

This repository takes the upstream [shadcn-vue](https://github.com/unovue/shadcn-vue) component library (TypeScript), converts it to JavaScript, applies Material Design 3 styling, and serves it as a custom component registry.

```
upstream shadcn-vue (TS)  →  registry/ (synced TS)  →  custom/registry/ (converted JS)
                                                              │
                                                     ┌───────┴───────┐
                                                     ▼               ▼
                                               public/r/       playground/v4/
                                              (deploy)         (preview)
```

**Key directories:**

| Directory | What's in it | Can I edit it? |
|-----------|-------------|----------------|
| `registry/` | Upstream TS source | No (overwritten by sync) |
| `custom/registry/` | Converted JS components | Yes |
| `scripts/` | Build and conversion scripts | Yes |
| `playground/v4/` | Nuxt 4 preview app | Yes (but `registry/` subdir is synced) |
| `public/r/` | Built registry JSON | No (generated by build) |

For the full architecture and data flow, see [GUIDE.md](./GUIDE.md).

## Getting Started

### Prerequisites

- [Node.js](https://nodejs.org/) v20+
- [pnpm](https://pnpm.io/) v10+

### Setup

```bash
git clone https://github.com/YOUR_ORG/shadcn-vue-material.git
cd shadcn-vue-material
pnpm install

# Install playground dependencies
cd playground/v4
pnpm install
cd ../..
```

### Running the Playground

```bash
pnpm playground:sync          # Sync components + rebuild registry
cd playground/v4
pnpm dev                      # Start dev server at http://localhost:3000
```

### Building the Registry

```bash
pnpm build:js                 # Build JS registry to public/r/
pnpm serve:public             # Preview at http://localhost:4173
```

## Types of Contributions

### Customizing a Component (Material Design Styling)

1. The converted JS component lives in `custom/registry/new-york-v4/ui/<component>/`
2. Edit the Vue files — apply MD3 tokens, adjust markup, add animations
3. Keep the same props, slots, and events as upstream for compatibility
4. Sync to playground and test:
   ```bash
   pnpm playground:sync
   cd playground/v4 && pnpm dev
   ```

### Adding a New Component

1. Create files in `custom/registry/new-york-v4/ui/<your-component>/`
2. Write in plain JavaScript (no `lang="ts"`)
3. Create an `index.js` barrel file exporting your components
4. Add an entry to `registry.json` with `files[].path` pointing to `custom/registry/...`
5. Build and test: `pnpm build:js`

### Improving the Conversion Pipeline

The TS-to-JS conversion logic lives in `scripts/transform-ts-to-js.js`. Common improvements:

- **Adding external type support:** Add entries to the `KNOWN_EXTERNAL_PROPS` map
- **Fixing conversion bugs:** Check the `convertVueMacrosToRuntime` function for macro handling
- **Improving output quality:** Check `stripTypescript` for formatting issues

After changes, re-run conversion and verify:
```bash
pnpm convert:source:js
# Inspect a few files in custom/registry/ to verify correctness
```

### Fixing Bugs

1. Check existing issues first
2. Create a branch: `git checkout -b fix/description`
3. Make your fix and test
4. Submit a pull request

## Code Style

- Components are written in **JavaScript** — no TypeScript in `custom/registry/`
- Use **2-space indentation**
- **No semicolons** (matches upstream shadcn-vue style)
- Use **single quotes** for strings
- Follow the existing component patterns for consistency

## Commit Messages

Use clear, descriptive messages:

```
fix: resolve missing asChild prop in Button conversion
feat: add NumberField component with MD3 styling
docs: update GUIDE.md with new playground workflow
chore: update reka-ui to v2.x
```

## Pull Request Checklist

- [ ] Changes build without errors (`pnpm build:js`)
- [ ] Playground works correctly (`pnpm playground:sync && cd playground/v4 && pnpm dev`)
- [ ] No new lint warnings introduced
- [ ] Component API is compatible with upstream shadcn-vue (same props, slots, events)
- [ ] If you added or changed a custom component, consider adding a per-component `README.md`
- [ ] If you modified the conversion pipeline, re-run `pnpm convert:source:js` and verify output

## Useful Commands Reference

```bash
# Sync from upstream shadcn-vue
pnpm sync

# Convert all TS components to JS
pnpm convert:source:js

# Sync to playground + rebuild
pnpm playground:sync

# Run playground dev server
cd playground/v4 && pnpm dev

# Build production registry
pnpm build:js

# Serve built registry locally
pnpm serve:public
```

## Where to Find Things

| What you're looking for | Where to look |
|------------------------|---------------|
| Conversion logic | `scripts/transform-ts-to-js.js` |
| Known external types | `KNOWN_EXTERNAL_PROPS` map in `transform-ts-to-js.js` |
| Component source (TS) | `registry/new-york-v4/ui/<component>/` |
| Component source (JS) | `custom/registry/new-york-v4/ui/<component>/` |
| Registry manifest | `registry.json` |
| Playground registry | `playground/v4/registry/` |
| Known warnings | `KNOWN-WARNINGS.md` |
| Full project documentation | `GUIDE.md` |

## Questions?

- Check [GUIDE.md](./GUIDE.md) for detailed documentation
- Check [KNOWN-WARNINGS.md](./KNOWN-WARNINGS.md) for known issues
- Open an issue if something isn't covered
